{
  "network_name": "Multi-AS-BGP-Policy-Lab",

  "project_settings": {
    "output_folder": "output"
  },

  "autonomous_systems": [
    {
      "name": "AS_CORE",
      "asn": 65001,
      "igp": {
        "protocol": "OSPF",
        "process_id": 1,
        "area": 0
      },
      "routers": [
        { "name": "R1", "loopback": "1.1.1.1/32" },
        { "name": "R2", "loopback": "2.2.2.2/32" }
      ],
      "ibgp": {
        "type": "full-mesh",
        "update_source": "loopback"
      }
    },

    {
      "name": "AS_CUSTOMER",
      "asn": 65002,
      "routers": [
        { "name": "C1", "loopback": "10.10.10.1/32" }
      ]
    },

    {
      "name": "AS_PEER",
      "asn": 65003,
      "routers": [
        { "name": "P1", "loopback": "20.20.20.1/32" }
      ]
    },

    {
      "name": "AS_PROVIDER",
      "asn": 65004,
      "routers": [
        { "name": "U1", "loopback": "30.30.30.1/32" }
      ]
    }
  ],

  "links": [
    {
      "endpoints": [
        { "device": "R1", "interface": "GigabitEthernet0/0", "ip": "192.168.1.1/30" },
        { "device": "C1", "interface": "GigabitEthernet0/0", "ip": "192.168.1.2/30" }
      ]
    },
    {
      "endpoints": [
        { "device": "R1", "interface": "GigabitEthernet0/1", "ip": "192.168.2.1/30" },
        { "device": "P1", "interface": "GigabitEthernet0/0", "ip": "192.168.2.2/30" }
      ]
    },
    {
      "endpoints": [
        { "device": "R2", "interface": "GigabitEthernet0/0", "ip": "192.168.3.1/30" },
        { "device": "U1", "interface": "GigabitEthernet0/0", "ip": "192.168.3.2/30" }
      ]
    },
    {
      "endpoints": [
        { "device": "R1", "interface": "GigabitEthernet0/2", "ip": "10.0.0.1/30" },
        { "device": "R2", "interface": "GigabitEthernet0/2", "ip": "10.0.0.2/30" }
      ]
    }
  ],

  "bgp": {
    "communities": {
      "customer": "65001:100",
      "peer": "65001:200",
      "provider": "65001:300"
    },

    "local_preference": {
      "customer": 200,
      "peer": 150,
      "provider": 50
    },

    "propagation_policy": {
      "to_customer": ["customer", "peer", "provider"],
      "to_peer": ["customer"],
      "to_provider": ["customer"]
    },

    "ebgp_peers": [
      {
        "local_router": "R1",
        "remote_router": "C1",
        "remote_as": 65002,
        "relationship": "customer"
      },
      {
        "local_router": "R1",
        "remote_router": "P1",
        "remote_as": 65003,
        "relationship": "peer"
      },
      {
        "local_router": "R2",
        "remote_router": "U1",
        "remote_as": 65004,
        "relationship": "provider"
      }
    ]
  }
}
